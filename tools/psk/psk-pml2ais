#!/usr/bin/env ruby
#
SYNOPSIS=<<EOF if __FILE__ == $0
Extract flow information from PML file, export as AbsInt AIS file and generate an AbsInt APX file.
EOF

$:.unshift File.dirname(__FILE__)
require 'psk-pml2ais'

if __FILE__ == $0
  options, args = PML::optparse(1..1, "file.pml", SYNOPSIS, :type => :none) do |o|
    AisExportTool.add_options(*o)
    ApxExportTool.add_options(*o)
  end
  AisExportTool.run(PML.from_file(args.first), options.output, options)
  
  # TODO make this available as separate psk-tool too to generate only the APX file!?
  if options.apx
    ApxExportTool.run(options.output, options)
  end
end

